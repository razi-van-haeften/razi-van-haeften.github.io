<!DOCTYPE html>
<html>

<body>
    <div id="login">
        <h2>Enter your name to join:</h2>
        <input id="nameInput" placeholder="Your name">
        <button onclick="joinGame()">Join</button>
        <pre id="pre-game-log"></pre>
    </div>

    <div id="game-container" style="display:none;">
        <h2>Welcome, <span id="playerName"></span>!</h2>
        <input id="msg" placeholder="Type a message">
        <button onclick="send()">Send</button>
        <pre id="game-log"></pre>
    </div>

    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
    <script>
        var socket = io("https://backend-ziq1.onrender.com");
        socket.on("connect", () => log("âœ… Connected, Socket Id: " + socket.id, "pre-game"));
        socket.on("joined", msg => log("ðŸ“© " + msg, "pre-game"));
        var playerName;

        function joinGame() {
            const input = document.getElementById("nameInput").value.trim();
            if (!input) return alert("Please enter a name");

            playerName = input;
            socket.emit("join", playerName);

            // Hide login, show game UI
            document.getElementById("login").style.display = "none";
            document.getElementById("game-container").style.display = "block";
            document.getElementById("playerName").textContent = playerName;


            socket.on("message", msg => log("ðŸ“© " + msg, "game"));
            socket.on("chat", msg => log("ðŸ’¬ " + msg, "game"));
        }

        function send() {
            const m = document.getElementById("msg").value;
            socket.emit("chat", m);
            document.getElementById("msg").value = "";
        }

        function log(t, id) {
            document.getElementById(id + "-log").textContent += t + "\n";
        }
    </script>
</body>

</html>