<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
    <title>Title</title>
</head>
<body>
    <div id="login-container">
        <p class="title">Enter your name to join:</p>
        <input class="input" id="name-input" placeholder="unamed">
        <button class="button" id="name-button" onclick="joinGame()">join</button>
        <pre class="log" id="pre-game-log"></pre>
    </div>

    <div id="game-container">
        <p class="title">Welcome, <span id="playerName"></span>!</p>
        <input class="input" id="msg-input" placeholder="message">
        <button class="button" onclick="send()">Send</button>
        <pre class="log" id="game-log"></pre>
    </div>

    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
    <script>
        var socket = io("https://backend-ziq1.onrender.com");
        socket.on("connect", () => log("âœ…  connected\nID  " + socket.id, "pre-game"));
        socket.on("joined", msg => log("ðŸ“©  " + msg, "pre-game"));
        var playerName;

        function joinGame() {
            var input = document.getElementById("name-input").value.trim();
            if (!input) input = document.getElementById("name-input").placeholder;

            playerName = input;
            socket.emit("join", playerName);
            
            document.getElementById("login-container").style.display = "none";
            document.getElementById("game-container").style.display = "block";
            document.getElementById("playerName").textContent = playerName;


            socket.on("message", msg => log("ðŸ“© " + msg, "game"));
            socket.on("chat", msg => log("ðŸ’¬ " + msg, "game"));
        }

        function send() {
            const msg = document.getElementById("msg-input").value.trim();

            if (!msg) return;

            socket.emit("chat", msg);
            document.getElementById("msg-input").value = "";
        }

        function log(t, id) {
            document.getElementById(id + "-log").textContent += t + "\n";
        }
    </script>
</body>

</html>